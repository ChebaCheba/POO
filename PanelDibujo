import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class PanelDibujo extends JPanel implements Runnable, MouseListener, MouseMotionListener{
	
	private int xN,
			    yN,
			    xLetrero,
			    yLetrero;
	private String nombre;
	private Image fondo;
	private boolean moverse;
	private Color color;
	
	public PanelDibujo(){
		super();
		this.setPreferredSize(new Dimension(800, 600));
		this.xN=this.yN=0;
		this.xLetrero=100;
		this.yLetrero=500;
		this.nombre="Pocoyo";
		this.color=Color.GRAY;
		this.fondo=new ImageIcon("poocoyo.jpg").getImage();
		this.addMouseListener(this);
		this.addMouseMotionListener(this);
		this.moverse=false;
		
		Thread hilo=new Thread(this);
		hilo.start();
	}

	public void paintComponent(Graphics g){
		super.paintComponent(g);
		g.drawImage(this.fondo, 0, 0, this.getWidth(), this.getHeight(), this);
		
		g.setColor(Color.ORANGE);
		g.fillOval(50+this.xN, 430-this.yN, 200, 100);
		g.setColor(Color.CYAN);
		g.fillArc(50+this.xN, 430-this.yN, 200, 100, 0, 100);
		
		g.setColor(Color.BLACK);
		g.drawLine(130+this.xN, 432-this.yN, 130+this.xN, 330-this.yN);
		g.setColor(Color.RED);
		g.fillOval(80+this.xN, 232-this.yN, 100, 100);
		g.setColor(Color.BLACK);
		g.drawString("Vamos "+this.nombre, this.xLetrero+this.xN, this.yLetrero-this.yN);
		
		g.setColor(this.color);
		g.fillRect(0, 530, 800, 70);
	}
	
	public void setNombre(String nombre){
		this.nombre=nombre;
		this.repaint();
	}
	
	public void setColorBase(Color colorBase){
		this.color=colorBase;
		this.repaint();
	}
	
	public void setAlturaNave(int altura){
		this.yN=altura;
		this.repaint();
	}

	public void run() {
		
		while(this.xN+250<=800){
			try{
				if(moverse){
					this.xN+=3;
					this.yN++;
					this.repaint();
				}
				Thread.sleep(20);
			}
			
			catch(InterruptedException ex){
				System.out.println("Error "+ex);
			}
		}
		
		
	}

	@Override
	public void mouseClicked(MouseEvent e) {
		//System.out.println("Se dio click"+" "+e.getX()+","+e.getY());
		this.moverse=true;
	}

	@Override
	public void mouseEntered(MouseEvent arg0) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseExited(MouseEvent arg0) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mousePressed(MouseEvent arg0) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseReleased(MouseEvent arg0) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseDragged(MouseEvent e) {
		this.xLetrero=e.getX();
		this.yLetrero=e.getY();
		this.repaint();
		
	}

	@Override
	public void mouseMoved(MouseEvent arg0) {
		// TODO Auto-generated method stub
		
	}
}
